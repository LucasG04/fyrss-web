<nav class="border-b border-main bg-main/95 shadow-sm sticky">
  <div class="mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8">
    <!-- Row: brand + desktop links + mobile toggle -->
    <div class="flex h-14 items-center justify-between">
      <!-- Brand -->
      <a
        routerLink="/"
        class="flex items-center gap-2 group transition-all duration-200 hover:scale-105"
      >
        <img
          src="/fyrss-icon-512.png"
          class="h-8 w-8 transition-transform duration-200 group-hover:rotate-3"
          alt="FY RSS Logo"
        />
        <span
          class="text-xl font-semibold tracking-tight text-main transition-colors duration-200 group-hover:text-slate-700 dark:group-hover:text-slate-300"
          >ForYou RSS</span
        >
      </a>

      <!-- Desktop nav -->
      <div class="hidden md:flex items-center gap-2">
        <ul class="flex items-center gap-1">
          <li>
            <a
              class="relative inline-flex items-center rounded-lg px-3 py-2 text-sm font-medium text-soft transition-all duration-200 text-main-hover bg-card-hover"
              routerLink="/feed"
              routerLinkActive="text-slate-900 dark:text-slate-50 bg-gray-200 dark:bg-slate-700"
              aria-current="page"
            >
              Feed
            </a>
          </li>
          <li>
            <a
              class="relative inline-flex items-center rounded-lg px-3 py-2 text-sm font-medium text-soft transition-all duration-200 text-main-hover bg-card-hover"
              routerLink="/saved"
              routerLinkActive="text-slate-900 dark:text-slate-50 bg-gray-200 dark:bg-slate-700"
            >
              Saved
            </a>
          </li>
          <li>
            <a
              class="relative inline-flex items-center rounded-lg px-3 py-2 text-sm font-medium text-soft transition-all duration-200 text-main-hover bg-card-hover"
              routerLink="/history"
              routerLinkActive="text-slate-900 dark:text-slate-50 bg-gray-200 dark:bg-slate-700"
            >
              History
            </a>
          </li>
          <li>
            <a
              class="relative inline-flex items-center rounded-lg px-3 py-2 text-sm font-medium text-soft transition-all duration-200 text-main-hover bg-card-hover"
              routerLink="/rss-feeds"
              routerLinkActive="text-slate-900 dark:text-slate-50 bg-gray-200 dark:bg-slate-700"
            >
              RSS Feeds
            </a>
          </li>
        </ul>

        <!-- Theme toggle for desktop -->
        <app-theme-toggle />
      </div>

      <!-- Mobile controls -->
      <div class="md:hidden flex items-center gap-2">
        <!-- Theme toggle for mobile -->
        <app-theme-toggle />

        <!-- Mobile menu toggle -->
        <button
          type="button"
          (click)="toggleMenu()"
          [attr.aria-expanded]="isMenuOpen()"
          aria-controls="main-menu"
          class="inline-flex h-10 w-10 items-center justify-center rounded-lg text-soft text-main-hover bg-card-hover focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-500/60 transition-all duration-200 hover:scale-105"
        >
          <span class="sr-only">Toggle main menu</span>
          <div class="relative w-6 h-6">
            <i
              class="eva eva-menu absolute inset-0 transition-all duration-300 ease-in-out"
              [class.opacity-100]="!isMenuOpen()"
              [class.opacity-0]="isMenuOpen()"
              [class.rotate-90]="isMenuOpen()"
              [class.scale-75]="isMenuOpen()"
              style="font-size: 24px"
            ></i>
            <i
              class="eva eva-close absolute inset-0 transition-all duration-300 ease-in-out"
              [class.opacity-0]="!isMenuOpen()"
              [class.opacity-100]="isMenuOpen()"
              [class.-rotate-90]="!isMenuOpen()"
              [class.scale-75]="!isMenuOpen()"
              style="font-size: 24px"
            ></i>
          </div>
        </button>
      </div>
    </div>

    <!-- Mobile panel -->
    <div
      id="main-menu"
      [class]="
        isMenuOpen()
          ? 'md:hidden transition-all duration-200 ease-out transform mobile-menu-enter'
          : 'hidden md:hidden'
      "
      class="pt-2 pb-4"
    >
      <ul class="space-y-1 rounded-lg border border-main bg-card p-2 shadow-lg">
        <li>
          <a
            class="relative block rounded-lg px-3 py-2 text-sm font-medium text-soft transition-all duration-200 text-main-hover bg-card-hover"
            routerLink="/feed"
            routerLinkActive="text-slate-900 dark:text-slate-50 bg-gray-200 dark:bg-slate-700"
          >
            Feed
          </a>
        </li>
        <li>
          <a
            class="relative block rounded-lg px-3 py-2 text-sm font-medium text-soft transition-all duration-200 text-main-hover bg-card-hover"
            routerLink="/saved"
            routerLinkActive="text-slate-900 dark:text-slate-50 bg-gray-200 dark:bg-slate-700"
          >
            Saved
          </a>
        </li>
        <li>
          <a
            class="relative block rounded-lg px-3 py-2 text-sm font-medium text-soft transition-all duration-200 text-main-hover bg-card-hover"
            routerLink="/history"
            routerLinkActive="text-slate-900 dark:text-slate-50 bg-gray-200 dark:bg-slate-700"
          >
            History
          </a>
        </li>
        <li>
          <a
            class="relative block rounded-lg px-3 py-2 text-sm font-medium text-soft transition-all duration-200 text-main-hover bg-card-hover"
            routerLink="/rss-feeds"
            routerLinkActive="text-slate-900 dark:text-slate-50 bg-gray-200 dark:bg-slate-700"
          >
            RSS Feeds
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

@if (configLoaded()) {
<div class="my-4">
  <router-outlet />
</div>
}
