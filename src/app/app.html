<nav
  class="sticky top-0 z-50 border-b border-main bg-main/90 supports-[backdrop-filter]:bg-main/70 backdrop-blur shadow-sm"
>
  <div class="mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8">
    <!-- Row: brand + desktop links + mobile toggle -->
    <div class="flex h-14 items-center justify-between">
      <!-- Brand -->
      <a routerLink="/" class="flex items-center gap-2">
        <img src="/fyrss-icon-512.png" class="h-8 w-8" alt="FY RSS Logo" />
        <span class="text-xl font-semibold tracking-tight text-main"
          >ForYou RSS</span
        >
      </a>

      <!-- Desktop nav -->
      <ul class="hidden md:flex items-center gap-1">
        <li>
          <a
            class="inline-flex items-center rounded-lg px-3 py-2 text-sm font-medium text-soft hover:text-main hover:bg-card focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/60 transition-colors"
            routerLink="/feed"
            routerLinkActive="text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20"
            aria-current="page"
            >Feed</a
          >
        </li>
        <li>
          <a
            class="inline-flex items-center rounded-lg px-3 py-2 text-sm font-medium text-soft hover:text-main hover:bg-card focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/60 transition-colors"
            routerLink="/saved"
            routerLinkActive="text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20"
            >Saved</a
          >
        </li>
        <li>
          <a
            class="inline-flex items-center rounded-lg px-3 py-2 text-sm font-medium text-soft hover:text-main hover:bg-card focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/60 transition-colors"
            routerLink="/history"
            routerLinkActive="text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20"
            >History</a
          >
        </li>
        <li>
          <a
            class="inline-flex items-center rounded-lg px-3 py-2 text-sm font-medium text-soft hover:text-main hover:bg-card focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/60 transition-colors"
            routerLink="/rss-feeds"
            routerLinkActive="text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20"
            >RSS Feeds</a
          >
        </li>
      </ul>

      <!-- Mobile toggle -->
      <button
        type="button"
        (click)="toggleMenu()"
        [attr.aria-expanded]="isMenuOpen()"
        aria-controls="main-menu"
        class="md:hidden inline-flex h-10 w-10 items-center justify-center rounded-lg text-soft hover:text-main hover:bg-card focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/60 transition-colors"
      >
        <span class="sr-only">Open main menu</span>
        <svg
          class="h-5 w-5"
          aria-hidden="true"
          viewBox="0 0 17 14"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M1 1h15M1 7h15M1 13h15"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>
    </div>

    <!-- Mobile panel -->
    <div
      id="main-menu"
      [class]="isMenuOpen() ? 'md:hidden' : 'hidden md:hidden'"
      class="pt-2 pb-4"
    >
      <ul class="space-y-1 rounded-lg border border-main bg-card p-2">
        <li>
          <a
            class="block rounded-lg px-3 py-2 text-sm font-medium text-soft hover:text-main hover:bg-main/50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/60 transition-colors"
            routerLink="/feed"
            routerLinkActive="text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20"
            >Feed</a
          >
        </li>
        <li>
          <a
            class="block rounded-lg px-3 py-2 text-sm font-medium text-soft hover:text-main hover:bg-main/50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/60 transition-colors"
            routerLink="/saved"
            routerLinkActive="text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20"
            >Saved</a
          >
        </li>
        <li>
          <a
            class="block rounded-lg px-3 py-2 text-sm font-medium text-soft hover:text-main hover:bg-main/50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/60 transition-colors"
            routerLink="/history"
            routerLinkActive="text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20"
            >History</a
          >
        </li>
        <li>
          <a
            class="block rounded-lg px-3 py-2 text-sm font-medium text-soft hover:text-main hover:bg-main/50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/60 transition-colors"
            routerLink="/rss-feeds"
            routerLinkActive="text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20"
            >RSS Feeds</a
          >
        </li>
      </ul>
    </div>
  </div>
</nav>

@if (configLoaded()) {
<div class="my-4">
  <router-outlet />
</div>
}
